$(document).ready(function(){CpnReadySteps()});function CpnReadySteps(){$(".uli-hcpns").hide();try{BindCustPartNum2($(".cust-part-add-btn"),$(".cust-part-ddl"))}catch(a){}}function IsValid(a){return(typeof(a)!=="undefined"&&a)}function IsPositiveInteger(a){return/^\d+$/.test(a)}function BindCustPartNum2(a,c){var b=$('input[name$="ControllerUrl"]').first().val();if(IsValid(b)&&b.trim()&&b.toLowerCase()!=="nonmvc"){a.click(function(d){d.preventDefault();SaveCustPartNumSteps(this,b,$(this).parents(".cust-part-add-grp").find(".cust-part-num-input").val())})}c.change(function(){if(this.value>"1"){SaveCustPartNumSteps(this,b,$(this).find(":selected").text())}else{if(this.value<"1"){SaveCustPartNumSteps(this,b,"")}else{var d=$(this).closest(".formSaveCustomerPartNumber");var e=$(d).find(".cust-part-ddl");var f=$(d).find(".cust-part-add-btn");e.unbind();f.unbind();ShowHideCustPartNumInput(this);BindCustPartNum2(f,e)}}})}function ShowHideCustPartNumInput(d){var b=$(d).closest(".formSaveCustomerPartNumber");var a=$(b).find(".cust-part-add-grp");var c=$(b).find(".cust-part-num-input");if($(d).val()==="1"){if(c.val()!==""){c.val("")}a.show()}else{a.hide();if($(d).val()>"1"){var e=$(d).find(":selected").text();if(c.val()!==e){c.val(e)}}else{if(c.val()!==""){c.val("")}}}}function SaveCustPartNumSteps(f,b,g){if(IsValidCustPartNum(g)){var a=$(f).closest(".formSaveCustomerPartNumber");var d=$(a).find(".cust-part-ddl");var e=$(a).find(".cust-part-add-btn");d.unbind();e.unbind();try{SaveCustPartNum2(f,b,g)}catch(c){}}}function SaveCustPartNum2(f,d,e){var h=$(f).closest(".formSaveCustomerPartNumber");if(IsValid(d)&&d.trim()&&d.toLowerCase()!=="nonmvc"){var a=$(h).find('input[name$="CartHeaderIdForCustPartNum"]').val();var c=$(h).find('input[name$="ProductIdEncForCustPartNum"]').val();var b=$("input[name=__RequestVerificationToken]").val();var i=$(h).find('input[name$="CustomerPartNumber"]').attr("id").split("_");var g=i[1];if(IsValid(c)&&c.trim()){$.ajax({url:"/Product/Product/SaveCustomerPartNumber2",type:"POST",data:{__RequestVerificationToken:b,productIdEncForCustPartNum:c,customerPartNumber:e,calledFrom:d,itemId:a,cartItemRowId:g}}).done(function(j){if(IsValid(j)){$(h).html($(j)[0].innerHTML);var k=$(h).find(".cust-part-ddl");var l=$(h).find(".cust-part-add-btn");ShowHideCustPartNumInput(k);BindCustPartNum2(l,k)}})}}else{ShowHideCustPartNumInput(f);$('input[id$="btnUpdateTop"]').click()}}function IsValidCustPartNum(b){var a=new RegExp("^[\x00-\x29\x2B-\xFF]*$");return a.test(b)};