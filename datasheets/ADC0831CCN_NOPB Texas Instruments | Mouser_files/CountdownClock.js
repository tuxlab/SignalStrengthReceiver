var isCart=window.location.href.toLowerCase().indexOf("/cart")>-1;if(isCart){$(document).bind("ready ajaxComplete",function(){try{ClockCounter();DisplayShippingRestrictionsInfo(header,body,closeText)}catch(a){}})}else{$(document).ready(function(){try{ClockCounter();DisplayShippingRestrictionsInfo(header,body,closeText)}catch(a){}})}function VerifyAndUpdateMultiMsg(){$.ajax({type:"POST",url:"/Cart/Cart/VerifyAndUpdateMultiMsg",cache:false,success:function(){location.reload()},error:function(a){$("div[id$=clockdiv]").hide()}})}function DisplayShippingRestrictionsInfo(e,b,a){var d=$('<div id="divCountdownClockDialog"><p>'+b+"</p></div>");d.dialog({dialogClass:"dialog_style",title:e,resizable:false,modal:true,width:515,height:"auto",close:function(){$(this).dialog("destroy")},buttons:[{id:"btnConfirm","class":"btn btn-default",text:a,click:function(){$(this).dialog("destroy")}}]});$(".dialog_style .ui-dialog-titlebar").each(function(){this.style.setProperty("padding",".4em 1em","important");this.style.setProperty("background","none repeat scroll 0 0 #E0E4E9");this.style.setProperty("position","relative");this.style.setProperty("font-family","Arial,Helvetica,Sans-serif");this.style.setProperty("font-size","15px")});$("#divCountdownClockDialog").addClass("cc-ui-widget");$(".cc-ui-widget").css("font-family","Arial,Helvetica,Sans-serif");$(".cc-ui-widget").css("font-size","12px");$("#btnConfirm").removeClass("ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only")}function ClockCounter(){if(!String.format){String.format=function(B){var A=Array.prototype.slice.call(arguments,1);return B.replace(/{(\d+)}/g,function(C,D){return typeof A[D]!="undefined"?A[D]:C})}}$("#js-atc div:first").addClass("pull-left");var l=$("input[id$=hidClockCounterStartTime]").val();var r=$("input[id$=hidClockCounterEndTime]").val();var k=$("input[id$=hidClockCart]").val();var g=$("input[id$=hidShowCounter]").val();var t=$("input[id$=hidTimeRemainInMilliseconds]").val();var p=$("input[id$=hidOrderNextHoursToShipToday]").val();var s=$("input[id$=hidOrderNextMinutesToShipToday]").val();var q=$("input[id$=hidShipmentLeavesWarehouseInHours]").val();var v=$("input[id$=hidShipmentLeavesWarehouseInMinutes]").val();var d=$("input[id$=hidOrderNowForFasterDelivery]").val();var n=$("<div/>").html(p).text();var j=$("<div/>").html(s).text();var m=$("<div/>").html(q).text();var b=$("<div/>").html(v).text();var u=$("<div/>").html(d).text();var o=document.getElementById("clockdiv");var i=document.getElementById("helpTooltip");l=new Date(l);r=new Date(r);var c=new Date().getTime();var f=(parseFloat(c)+parseFloat(t));var h=new Date(f);var w=$("input[id$=hidShipCutoffMsgType]").val();var a=new Date($("input[id$=hidDisplayClockStartTime]").val());var e=$("input[id$=hidOrderNowToShipToday]").val();var x=$("<div/>").html(e).text();if(g==1){y("clockdiv",t)}function z(D){var C=D;var E=Math.floor((C/1000)%60);var B=Math.floor((C/1000/60)%60);var A=Math.floor((C/1000/(60*60))%24);var F=Math.floor(C/(1000*60*60*24));if(F>0){A=A+(F*24)}return{total:C,hours:A,minutes:B,seconds:E}}function y(H,C){var B=document.getElementById(H);var E=B.querySelector(".hours");var D=B.querySelector(".minutes");var F=B.querySelector(".seconds");function G(){var I=new Date();var M=(h-I);C=M;if(C<0){$("div[id$=clockdiv]").hide()}var J=z(C);E.innerHTML=J.hours<10?("0"+J.hours):J.hours;D.innerHTML=J.minutes<10?("0"+J.minutes):J.minutes;F.innerHTML=J.seconds<10?("0"+J.seconds):J.seconds;if(J.total<=0){clearInterval(A)}var L;if(J.hours==0){L=D.innerHTML+":"+F.innerHTML}else{L=E.innerHTML+":"+D.innerHTML+":"+F.innerHTML}if(w=="display"){o.innerHTML=String.format(x,L)+" "+i.innerHTML}else{if(w=="warehouse"){o.innerHTML=String.format(m,L)+" "+i.innerHTML}else{if(w=="ordernow"){o.innerHTML=u}else{if(J.hours==0){o.innerHTML=String.format(j,L)+" "+i.innerHTML}else{o.innerHTML=String.format(n,L)+" "+i.innerHTML}}}}if((J.hours==0&&J.minutes==0&&J.seconds==0)||(new Date(c)>=h)||(isNaN(J.hours)||isNaN(J.minutes)||isNaN(J.seconds))){$("div[id$=clockdiv]").hide();if(w!="off"){VerifyAndUpdateMultiMsg()}}var K=(a.getTime()-I);K=(K-1000);if(K>=0&&K<=1000){w="display"}C=C-1000}G();var A=setInterval(G,1000);if((typeof(k)!="undefined")&&(k.toLowerCase()=="cart")){$(".liCounterClock").css({"background-color":"transparent",border:"none"})}else{o.style.width="953px";o.style.textAlign="center";o.style.marginTop="5px"}}};